# Web页面生成使用指南

## 概述

AI Flow提供了强大的前端页面自动生成功能，通过与Frontend Agent对话，可以快速生成HTML、CSS、JavaScript页面，并直接通过浏览器访问。

## 前置条件

1. AI Flow服务已启动
2. 确认服务端口（例如：8001）
3. 确认org_id和flow_id

## 使用步骤

### 1. 启动服务

```bash
cd /path/to/ai-flow
./run-compose.sh -o 002 -f 001 -p 8001
```

### 2. 与Frontend Agent对话

通过AI Flow的聊天接口，使用`@前端`前缀与Frontend Agent对话：

#### 方式A：通过HTTP API

```bash
curl -X POST http://localhost:8001/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "@前端 帮我生成一个用户注册表单页面"
  }'
```

#### 方式B：通过WebSocket

```javascript
const ws = new WebSocket('ws://localhost:8001/ws/@前端 帮我生成一个用户注册表单页面');
```

### 3. 访问生成的页面

页面生成完成后，可以通过以下方式访问：

**方式1：根路径访问**
```
http://localhost:8001/
http://localhost:8001/style.css
http://localhost:8001/script.js
```

**方式2：/web/前缀访问**
```
http://localhost:8001/web/
http://localhost:8001/web/index.html
http://localhost:8001/web/about.html
```

## 使用案例

### 案例1：项目管理看板（Kanban Board）

**对话内容：**
```
@前端 创建一个项目管理看板页面，包含以下功能：
1. 三个列：待办、进行中、已完成
2. 每列显示任务卡片，包含：
   - 任务标题
   - 任务描述
   - 负责人头像
   - 优先级标签（高/中/低）
   - 截止日期
3. 可以拖拽任务卡片在不同列之间移动
4. 顶部添加新任务按钮
5. 底部显示统计：总任务数、各状态任务数

要求：
- 使用现代卡片设计
- 支持拖拽交互
- 响应式布局
- 使用LocalStorage保存数据
```

**生成的文件：**
- `web/index.html` - 看板页面（单文件，包含所有HTML、CSS、JS）

**访问地址：**
```
http://localhost:8001/
```

**演示效果：**
- 📋 直观的任务管理界面
- 🎯 拖拽式任务状态更新
- 📊 实时统计信息
- 💾 数据持久化存储

---

### 案例2：数据列表管理页面

**对话内容：**
```
@前端 生成一个员工信息管理列表页面：
1. 顶部搜索栏和筛选器（部门、职位）
2. 数据表格显示员工信息：
   - 头像
   - 姓名
   - 部门
   - 职位
   - 入职日期
   - 状态（在职/离职）
   - 操作按钮（编辑/删除）
3. 表格支持排序（按姓名、入职日期）
4. 底部分页器
5. 右上角添加员工按钮

要求：
- 表格样式现代化
- 支持搜索和筛选
- 悬停效果
- 响应式设计
```

**生成的文件：**
- `web/index.html` - 员工管理页面（单文件）

**访问地址：**
```
http://localhost:8001/
```

**演示效果：**
- 🔍 实时搜索和筛选
- 📊 数据表格排序
- 📱 移动端友好
- ⚡ 流畅的交互体验

---

### 案例3：销售数据仪表板

**对话内容：**
```
@前端 创建一个销售数据仪表板页面：
1. 顶部导航栏（公司Logo + 导航菜单）
2. 4个关键指标卡片：
   - 总销售额：¥2,456,789
   - 订单数量：1,234
   - 客户数量：567
   - 转化率：12.5%
3. 使用Chart.js创建两个图表：
   - 折线图：最近30天销售趋势
   - 饼图：产品销售占比
4. 底部数据表格：最新订单列表
5. 右上角时间范围选择器

要求：
- 使用现代商务风格
- 图表数据使用模拟数据
- 卡片悬停效果
- 响应式布局
```

**生成的文件：**
- `web/index.html` - 销售仪表板页面（单文件）

**访问地址：**
```
http://localhost:8001/
```

**演示效果：**
- 📈 直观的数据可视化
- 💼 专业的商务界面
- 📊 多维度数据展示
- 🎨 现代化设计风格

---

### 案例4：产品展示页面

**对话内容：**
```
@前端 生成一个产品展示页面：
1. 顶部导航栏和搜索框
2. 产品网格布局（每行4个产品）
3. 每个产品卡片包含：
   - 产品图片（使用占位图）
   - 产品名称
   - 价格
   - 评分（星级）
   - 简短描述
   - "立即购买"按钮
4. 左侧筛选侧边栏（价格、品牌、分类）
5. 底部分页器

要求：
- 卡片悬停效果
- 筛选功能
- 响应式布局（移动端每行1个）
- 现代化电商风格
```

**生成的文件：**
- `web/index.html` - 产品展示页面（单文件）

**访问地址：**
```
http://localhost:8001/
```

**演示效果：**
- 🛍️ 电商风格界面
- 🔍 产品筛选功能
- 📱 移动端适配
- ⭐ 用户友好的交互

---

### 案例5：任务管理应用

**对话内容：**
```
@前端 创建一个任务管理应用：
1. 顶部添加任务输入框和按钮
2. 任务列表显示区域：
   - 任务标题
   - 任务描述
   - 创建时间
   - 优先级（高/中/低）
   - 完成状态复选框
   - 删除按钮
3. 底部统计信息：
   - 总任务数
   - 已完成任务数
   - 未完成任务数
4. 任务按优先级颜色区分

要求：
- 简洁的任务管理界面
- 实时状态更新
- LocalStorage数据持久化
- 现代化设计
```

**生成的文件：**
- `web/index.html` - 任务管理页面（单文件）

**访问地址：**
```
http://localhost:8001/
```

**演示效果：**
- ✅ 简洁的任务管理
- 💾 数据自动保存
- 🎯 优先级可视化
- 📊 实时统计更新

---

## 高级技巧

### 1. 修改已有页面

```
@前端 修改index.html，在顶部添加一个导航栏，包含：首页、关于我们、联系我们
```

### 2. 添加新页面

```
@前端 创建一个about.html页面，介绍公司简介、团队成员、联系方式
```

### 3. 优化样式

```
@前端 优化index.html的样式，使用更现代的配色方案，添加动画效果
```

### 4. 添加交互功能

```
@前端 为产品列表添加搜索功能，用户输入关键词后实时过滤显示结果
```

### 5. 集成API调用

```
@前端 修改注册表单，提交时调用后端API：
POST http://localhost:8001/api/register
发送JSON数据：{"username": "xxx", "email": "xxx", "password": "xxx"}
```

## 文件结构

生成的页面文件位于工作区的web目录（单文件模式）：

```
/workspace/code/flow/o_{ORG_ID}/f_{FLOW_ID}/web/
└── index.html          # 唯一文件，包含所有HTML、CSS、JS
```

**单文件模式特点：**
- ✅ 所有代码都在一个HTML文件中
- ✅ CSS样式内嵌在`<style>`标签中
- ✅ JavaScript代码内嵌在`<script>`标签中
- ✅ 使用CDN引入外部库（如Bootstrap、Chart.js）
- ✅ 便于部署和分享
- ✅ 减少文件管理复杂度

## 注意事项

### ✅ 支持的功能
- 纯静态HTML/CSS/JS页面
- 使用轻量级库（Bootstrap、Chart.js、jQuery等）
- LocalStorage数据存储
- Fetch API调用后端接口
- 响应式设计

### ❌ 不支持的功能
- 复杂的前端框架（React、Vue、Angular）
- Node.js服务端渲染
- Webpack等构建工具
- TypeScript（除非预编译）

### 最佳实践

1. **明确需求**：详细描述页面功能、样式、交互
2. **分步实施**：复杂页面可以分多次对话完成
3. **及时测试**：每次生成后在浏览器中测试效果
4. **迭代优化**：根据测试结果不断优化页面

## 故障排除

### 问题1：无法访问页面（404错误）

**原因**：web目录或index.html文件不存在

**解决方法**：
```
@前端 在web目录创建一个简单的index.html测试页面
```

### 问题2：样式不生效

**原因**：CSS代码在`<style>`标签中有语法错误

**解决方法**：
```
@前端 检查index.html中的CSS代码，确保语法正确，没有未闭合的标签
```

### 问题3：JavaScript不工作

**原因**：JS代码在`<script>`标签中有语法错误

**解决方法**：
1. 打开浏览器开发者工具（F12）查看控制台错误
2. 向Frontend Agent反馈错误信息进行修复
3. 确保所有JavaScript代码都在`<script>`标签内

### 问题4：页面样式混乱

**原因**：浏览器缓存

**解决方法**：
1. 按 Ctrl+Shift+R (Windows) 或 Cmd+Shift+R (Mac) 强制刷新
2. 或清除浏览器缓存后重新访问

## 示例：完整工作流程

```bash
# 1. 启动服务
./run-compose.sh -o 002 -f 001 -p 8001

# 2. 发送请求生成页面
curl -X POST http://localhost:8001/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "@前端 生成一个简单的个人简历页面，包含头像、姓名、技能、工作经历"
  }'

# 3. 等待生成完成（查看响应）

# 4. 在浏览器中访问
open http://localhost:8001/

# 5. 如需修改，继续对话
curl -X POST http://localhost:8001/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "@前端 在简历页面底部添加联系方式和社交媒体链接"
  }'
```

## 总结

通过AI Flow的Frontend Agent，您可以：
- 🚀 快速生成各类前端页面
- 🎨 自定义样式和交互效果
- 📱 支持响应式设计
- 🔧 持续迭代优化页面
- 🌐 即生成即可访问

开始使用`@前端`命令，让AI帮您快速构建精美的Web页面吧！

